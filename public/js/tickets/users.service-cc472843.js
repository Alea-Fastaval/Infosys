const l=t=>t?new Intl.DateTimeFormat("en-GB",{dateStyle:"short",timeStyle:"medium"}).format(new Date(t*1e3)).replace(",",""):"";class h extends Error{constructor(a){super("Error in API route"),this.name="ApiError",this.json=a}}const r=t=>{if(t.status!=="success")throw new h(t)},e=async t=>{const a=await fetch(`${t}`);a.headers.get("Location")&&(window.location.href=a.headers.get("Location"));const s=await a.json();return r(s),s},o=async(t,a)=>{const s=await fetch(`${t}`,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});s.headers.get("Location")&&(window.location.href=s.headers.get("Location"));const i=await s.json();return r(i),i},d=async()=>await e("/tickets/ajax"),y=async t=>await o("/tickets/ajax",t),f=async t=>await o("/tickets/ajax",t),g=async t=>await e(`/tickets/ajax?id=${t}`),k=async t=>await e(`/tickets/${t}/messages`),p=async t=>await o(`/tickets/${t.ticket}/messages`,t);let n;const w=async()=>await e("/translations/ajax/tickets.*?lang=da").then(t=>{n=t==null?void 0:t.translations}),j=async()=>((!n||Object.keys(n).length===0)&&await w(),n);let c=[];const u=async()=>await e("/admin/ajax/users/*").then(t=>c=t.users),m=async()=>(c.length===0&&await u(),c);export{m as a,l as b,y as c,g as d,k as e,d as f,j as g,p as h,f as u};
