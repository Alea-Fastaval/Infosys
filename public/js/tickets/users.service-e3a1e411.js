import{T as w}from"./index-00a8b370.js";const k=t=>t?new Intl.DateTimeFormat("en-GB",{dateStyle:"short",timeStyle:"medium"}).format(new Date(t*1e3)).replace(",",""):"",d=t=>{const e=new w("da-DK");if(!t)return"";const a=t.toString().length<=10?t*1e3:t;return e.format(new Date(a))};class l extends Error{constructor(e){super("Error in API route"),this.name="ApiError",this.json=e}}const c=t=>{if(t.status!=="success")throw new l(t)},s=async t=>{const e=await fetch(`${t}`);e.headers.get("Location")&&(window.location.href=e.headers.get("Location"));const a=await e.json();return c(a),a},n=async(t,e)=>{const a=await fetch(`${t}`,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});a.headers.get("Location")&&(window.location.href=a.headers.get("Location"));const r=await a.json();return c(r),r},f={fetchTickets:async()=>await s("/tickets/ajax"),createTicket:async t=>await n("/tickets/ajax",t),updateTicket:async t=>await n("/tickets/ajax",t),getTicket:async t=>await s(`/tickets/ajax?id=${t}`),fetchTicketMessages:async t=>await s(`/tickets/${t}/messages`),createTicketMessage:async t=>await n(`/tickets/${t.ticket}/messages`,t),updateTicketMessage:async t=>await n(`/tickets/${t.ticket}/messages`,t)};let i;const h={populateTranslations:async()=>await s("/translations/ajax/tickets.*?lang=da").then(t=>{i=t==null?void 0:t.translations}),getTranslations:async()=>((!i||Object.keys(i).length===0)&&await h.populateTranslations(),i)};let o=[];const u={populateUsers:async()=>await s("/admin/ajax/users/*").then(t=>o=t.users),getUserList:async()=>(o.length===0&&await u.populateUsers(),o)};export{f as a,d as b,k as f,h as t,u};
